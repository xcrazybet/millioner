<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>XCrazyBet - All Bets Listing</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

<!-- Fonts & Icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&display=swap" rel="stylesheet">

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>

<style>
    :root {
        --primary: #4f46e5;
        --primary-dark: #4338ca;
        --secondary: #7c3aed;
        --accent: #10b981;
        --accent-dark: #059669;
        --danger: #ef4444;
        --warning: #f59e0b;
        --success: #10b981;
        --info: #3b82f6;
        --accumulator: #7209B7;
        --accumulator-light: #9D4EDD;
        --dark-bg: #0f172a;
        --medium-bg: #1e293b;
        --light-bg: #334155;
        --text: #f8fafc;
        --text-secondary: #cbd5e1;
        --card-bg: rgba(30, 41, 59, 0.9);
        --border-color: #475569;
    }

    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
    }

    html {
        font-size: 14px;
    }

    body {
        font-family: 'Montserrat', sans-serif;
        background: linear-gradient(135deg, var(--dark-bg), var(--medium-bg));
        color: var(--text);
        min-height: 100vh;
        overflow-x: hidden;
        padding-bottom: 60px;
    }

    /* Header */
    .header {
        background: rgba(15, 23, 42, 0.98);
        padding: 12px 20px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        border-bottom: 3px solid var(--primary);
        position: sticky;
        top: 0;
        z-index: 1000;
        backdrop-filter: blur(10px);
    }

    .logo {
        font-size: 18px;
        font-weight: 700;
        color: white;
        display: flex;
        align-items: center;
        gap: 10px;
    }

    .logo i {
        font-size: 20px;
        color: var(--accent);
    }

    .nav-links {
        display: flex;
        gap: 10px;
    }

    .nav-btn {
        padding: 8px 15px;
        background: var(--medium-bg);
        border-radius: 8px;
        color: var(--text);
        text-decoration: none;
        font-weight: 500;
        font-size: 13px;
        transition: all 0.3s;
        border: 1px solid transparent;
        display: flex;
        align-items: center;
        gap: 6px;
    }

    .nav-btn i {
        font-size: 14px;
    }

    .nav-btn:hover {
        background: var(--primary);
        transform: translateY(-2px);
        border-color: var(--text);
    }

    .nav-btn.active {
        background: var(--primary);
        border-color: var(--text);
    }

    /* Main Container */
    .container {
        max-width: 1400px;
        margin: 0 auto;
        padding: 20px;
    }

    /* Page Header */
    .page-header {
        text-align: center;
        margin-bottom: 30px;
        padding: 25px;
        background: linear-gradient(135deg, rgba(79, 70, 229, 0.1), rgba(124, 58, 237, 0.1));
        border-radius: 16px;
        border: 2px solid var(--primary);
    }

    .page-header h1 {
        color: white;
        font-size: 28px;
        margin-bottom: 10px;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 12px;
    }

    .page-header p {
        color: var(--text-secondary);
        font-size: 14px;
        line-height: 1.6;
        max-width: 700px;
        margin: 0 auto;
    }

    .page-stats {
        display: flex;
        justify-content: center;
        gap: 30px;
        margin-top: 20px;
        flex-wrap: wrap;
    }

    .page-stat {
        text-align: center;
        padding: 15px 25px;
        background: rgba(255, 255, 255, 0.05);
        border-radius: 10px;
        min-width: 150px;
    }

    .stat-value {
        font-size: 24px;
        font-weight: 700;
        color: var(--accent);
        margin-bottom: 5px;
    }

    .stat-label {
        font-size: 12px;
        color: var(--text-secondary);
        text-transform: uppercase;
        letter-spacing: 1px;
    }

    /* Filters Section */
    .filters-section {
        background: var(--card-bg);
        border-radius: 12px;
        padding: 20px;
        margin-bottom: 25px;
        border: 1px solid var(--border-color);
    }

    .filter-controls {
        display: flex;
        gap: 15px;
        flex-wrap: wrap;
    }

    .filter-group {
        flex: 1;
        min-width: 200px;
    }

    .filter-label {
        display: block;
        font-size: 12px;
        color: var(--text-secondary);
        margin-bottom: 8px;
        font-weight: 600;
    }

    .filter-select {
        width: 100%;
        padding: 12px;
        background: var(--light-bg);
        border: 2px solid var(--border-color);
        border-radius: 8px;
        color: var(--text);
        font-size: 14px;
        cursor: pointer;
        transition: all 0.3s;
    }

    .filter-select:focus {
        outline: none;
        border-color: var(--primary);
        background: rgba(79, 70, 229, 0.1);
    }

    /* Search Box */
    .search-box {
        position: relative;
        flex: 2;
        min-width: 300px;
    }

    .search-input {
        width: 100%;
        padding: 12px 45px 12px 15px;
        background: var(--light-bg);
        border: 2px solid var(--border-color);
        border-radius: 8px;
        color: var(--text);
        font-size: 14px;
    }

    .search-input:focus {
        outline: none;
        border-color: var(--primary);
    }

    .search-icon {
        position: absolute;
        right: 15px;
        top: 50%;
        transform: translateY(-50%);
        color: var(--text-secondary);
        font-size: 16px;
    }

    /* Active Filters */
    .active-filters {
        display: flex;
        gap: 10px;
        margin-top: 15px;
        flex-wrap: wrap;
    }

    .filter-tag {
        background: rgba(79, 70, 229, 0.2);
        color: var(--primary);
        padding: 6px 12px;
        border-radius: 20px;
        font-size: 12px;
        display: flex;
        align-items: center;
        gap: 6px;
    }

    .filter-tag .remove {
        cursor: pointer;
        font-size: 14px;
        opacity: 0.7;
    }

    .filter-tag .remove:hover {
        opacity: 1;
    }

    /* Quick Stats Bar */
    .quick-stats-bar {
        display: flex;
        gap: 15px;
        margin-bottom: 20px;
        flex-wrap: wrap;
    }

    .quick-stat {
        flex: 1;
        min-width: 150px;
        background: rgba(255, 255, 255, 0.05);
        border-radius: 10px;
        padding: 15px;
        text-align: center;
        border: 1px solid var(--border-color);
    }

    .quick-stat-value {
        font-size: 18px;
        font-weight: 700;
        color: var(--accent);
        margin-bottom: 5px;
    }

    .quick-stat-label {
        font-size: 11px;
        color: var(--text-secondary);
        text-transform: uppercase;
    }

    .quick-stat.accumulator {
        border-color: var(--accumulator);
        background: rgba(114, 9, 183, 0.1);
    }

    .quick-stat.accumulator .quick-stat-value {
        color: var(--accumulator-light);
    }

    /* Bets Table */
    .bets-table-container {
        background: var(--card-bg);
        border-radius: 12px;
        padding: 20px;
        margin-bottom: 25px;
        border: 1px solid var(--border-color);
        overflow-x: auto;
    }

    .bets-table {
        width: 100%;
        border-collapse: collapse;
        min-width: 1000px;
    }

    .bets-table th {
        background: var(--medium-bg);
        padding: 15px;
        text-align: left;
        font-size: 13px;
        font-weight: 600;
        color: var(--text-secondary);
        border-bottom: 2px solid var(--border-color);
        text-transform: uppercase;
        letter-spacing: 1px;
    }

    .bets-table td {
        padding: 15px;
        border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        vertical-align: middle;
    }

    .bets-table tr:hover {
        background: rgba(255, 255, 255, 0.03);
    }

    .bets-table tr.accumulator-row {
        background: rgba(114, 9, 183, 0.05);
    }

    .bets-table tr.accumulator-row:hover {
        background: rgba(114, 9, 183, 0.1);
    }

    /* Bet Number */
    .bet-number {
        width: 60px;
        text-align: center;
        font-weight: 700;
        color: var(--text-secondary);
        font-size: 14px;
    }

    /* Bet Details */
    .bet-match {
        font-weight: 600;
        font-size: 14px;
        margin-bottom: 5px;
        display: flex;
        align-items: center;
        flex-wrap: wrap;
        gap: 8px;
    }

    .bet-league {
        font-size: 12px;
        color: var(--text-secondary);
    }

    /* Accumulator Details */
    .accumulator-details {
        font-size: 11px;
        color: var(--text-secondary);
        margin-top: 8px;
        padding-left: 12px;
        border-left: 2px solid var(--accumulator);
        line-height: 1.4;
    }

    .accumulator-selection {
        display: block;
        margin-bottom: 4px;
    }

    /* Accumulator Indicator */
    .accumulator-indicator {
        display: inline-flex;
        align-items: center;
        gap: 5px;
        padding: 4px 10px;
        background: rgba(114, 9, 183, 0.2);
        color: var(--accumulator-light);
        border-radius: 12px;
        font-size: 11px;
        font-weight: 600;
    }

    /* User Info */
    .user-info {
        display: flex;
        align-items: center;
        gap: 10px;
    }

    .user-avatar {
        width: 36px;
        height: 36px;
        background: linear-gradient(135deg, var(--primary), var(--secondary));
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: 600;
        font-size: 14px;
    }

    .user-info.accumulator .user-avatar {
        background: linear-gradient(135deg, var(--accumulator), var(--accumulator-light));
    }

    .user-details {
        display: flex;
        flex-direction: column;
    }

    .user-name {
        font-weight: 600;
        font-size: 13px;
    }

    .user-time {
        font-size: 11px;
        color: var(--text-secondary);
    }

    /* Bet Type */
    .bet-type {
        padding: 6px 12px;
        border-radius: 6px;
        font-size: 12px;
        font-weight: 600;
        text-align: center;
        display: inline-block;
    }

    .bet-type.home {
        background: rgba(59, 130, 246, 0.2);
        color: #3b82f6;
    }

    .bet-type.away {
        background: rgba(239, 68, 68, 0.2);
        color: #ef4444;
    }

    .bet-type.draw {
        background: rgba(168, 85, 247, 0.2);
        color: #a855f7;
    }

    .bet-type.accumulator {
        background: rgba(114, 9, 183, 0.2);
        color: var(--accumulator-light);
    }

    /* Odds & Amount */
    .bet-odds {
        font-weight: 700;
        color: var(--accent);
        font-size: 16px;
    }

    .bet-amount {
        font-weight: 700;
        color: white;
        font-size: 16px;
    }

    /* Potential Win */
    .potential-win {
        font-weight: 700;
        color: var(--success);
        font-size: 16px;
    }

    /* Status Badge */
    .status-badge {
        padding: 6px 12px;
        border-radius: 20px;
        font-size: 12px;
        font-weight: 600;
        text-align: center;
        display: inline-block;
        min-width: 80px;
    }

    .status-pending {
        background: rgba(59, 130, 246, 0.2);
        color: #3b82f6;
    }

    .status-won {
        background: rgba(16, 185, 129, 0.2);
        color: #10b981;
    }

    .status-lost {
        background: rgba(239, 68, 68, 0.2);
        color: #ef4444;
    }

    .status-void {
        background: rgba(148, 163, 184, 0.2);
        color: #94a3b8;
    }

    .status-accumulator {
        background: rgba(114, 9, 183, 0.2);
        color: var(--accumulator-light);
    }

    /* Action Buttons */
    .action-buttons {
        display: flex;
        gap: 8px;
    }

    .action-btn {
        padding: 8px 12px;
        background: var(--light-bg);
        border: none;
        border-radius: 6px;
        color: var(--text);
        font-size: 12px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s;
        display: flex;
        align-items: center;
        gap: 5px;
    }

    .action-btn:hover {
        background: var(--primary);
        transform: translateY(-2px);
    }

    .action-btn.view {
        background: rgba(59, 130, 246, 0.2);
        color: #3b82f6;
    }

    .action-btn.save {
        background: rgba(124, 58, 237, 0.2);
        color: #7c3aed;
    }

    .action-btn.share {
        background: rgba(16, 185, 129, 0.2);
        color: #10b981;
    }

    .action-btn.accumulator {
        background: rgba(114, 9, 183, 0.2);
        color: var(--accumulator-light);
    }

    /* Live Indicator */
    .live-indicator {
        display: inline-flex;
        align-items: center;
        gap: 5px;
        padding: 4px 10px;
        background: rgba(239, 68, 68, 0.2);
        color: #ef4444;
        border-radius: 12px;
        font-size: 11px;
        font-weight: 600;
        margin-left: 10px;
        animation: pulse 1.5s infinite;
    }

    @keyframes pulse {
        0% { opacity: 1; }
        50% { opacity: 0.6; }
        100% { opacity: 1; }
    }

    /* Records Section */
    .records-section {
        background: var(--card-bg);
        border-radius: 12px;
        padding: 25px;
        margin-top: 30px;
        border: 1px solid var(--border-color);
    }

    .records-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 20px;
    }

    .records-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 20px;
    }

    .record-card {
        background: rgba(255, 255, 255, 0.03);
        border-radius: 10px;
        padding: 20px;
        border: 1px solid rgba(255, 255, 255, 0.1);
        transition: all 0.3s;
    }

    .record-card:hover {
        transform: translateY(-5px);
        border-color: var(--primary);
    }

    .record-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 15px;
    }

    .record-title {
        font-weight: 600;
        font-size: 14px;
        color: var(--text);
    }

    .record-date {
        font-size: 11px;
        color: var(--text-secondary);
    }

    .record-stats {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 10px;
        margin-top: 15px;
    }

    .record-stat {
        text-align: center;
        padding: 10px;
        background: rgba(255, 255, 255, 0.05);
        border-radius: 6px;
    }

    .record-stat-value {
        font-size: 18px;
        font-weight: 700;
        color: var(--accent);
        margin-bottom: 3px;
    }

    .record-stat-label {
        font-size: 10px;
        color: var(--text-secondary);
        text-transform: uppercase;
    }

    /* Pagination */
    .pagination {
        display: flex;
        justify-content: center;
        align-items: center;
        gap: 15px;
        margin-top: 30px;
        padding: 20px;
    }

    .page-btn {
        padding: 10px 18px;
        background: var(--light-bg);
        border: none;
        border-radius: 8px;
        color: var(--text);
        font-size: 14px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s;
        display: flex;
        align-items: center;
        gap: 8px;
    }

    .page-btn:hover:not(:disabled) {
        background: var(--primary);
        transform: translateY(-2px);
    }

    .page-btn:disabled {
        opacity: 0.5;
        cursor: not-allowed;
    }

    .page-numbers {
        display: flex;
        gap: 8px;
    }

    .page-number {
        width: 40px;
        height: 40px;
        display: flex;
        align-items: center;
        justify-content: center;
        background: var(--light-bg);
        border-radius: 8px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s;
    }

    .page-number:hover {
        background: var(--primary);
    }

    .page-number.active {
        background: var(--primary);
        color: white;
    }

    /* Loading & Empty States */
    .loading {
        text-align: center;
        padding: 60px 20px;
        color: var(--text-secondary);
    }

    .loading i {
        font-size: 40px;
        color: var(--primary);
        margin-bottom: 15px;
        display: block;
        animation: spin 1s linear infinite;
    }

    @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
    }

    .empty-state {
        text-align: center;
        padding: 60px 20px;
        color: var(--text-secondary);
    }

    .empty-state i {
        font-size: 48px;
        color: var(--text-secondary);
        margin-bottom: 15px;
        display: block;
        opacity: 0.5;
    }

    /* Storage Integration Button */
    .storage-btn {
        position: fixed;
        bottom: 20px;
        right: 20px;
        z-index: 1000;
        background: linear-gradient(135deg, #4f46e5 0%, #7c3aed 100%);
        color: white;
        border: none;
        border-radius: 50px;
        padding: 12px 24px;
        font-weight: 600;
        cursor: pointer;
        box-shadow: 0 4px 20px rgba(79, 70, 229, 0.4);
        display: flex;
        align-items: center;
        gap: 8px;
        transition: all 0.3s;
    }
    
    .storage-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 6px 25px rgba(79, 70, 229, 0.6);
    }
    
    /* Storage Modal */
    .storage-modal {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0,0,0,0.5);
        z-index: 2000;
        align-items: center;
        justify-content: center;
    }
    
    .storage-modal.active {
        display: flex;
    }
    
    .storage-modal-content {
        background: var(--card-bg);
        border-radius: 12px;
        padding: 2rem;
        max-width: 500px;
        width: 90%;
        max-height: 80vh;
        overflow-y: auto;
        color: var(--text);
    }
    
    .storage-modal-content h2 {
        color: white;
        margin-bottom: 1rem;
    }
    
    .storage-modal-content input {
        width: 100%;
        padding: 12px;
        background: var(--light-bg);
        border: 2px solid var(--border-color);
        border-radius: 8px;
        color: var(--text);
        margin-bottom: 1.5rem;
        font-size: 14px;
    }
    
    .storage-modal-content input:focus {
        outline: none;
        border-color: var(--primary);
    }
    
    .storage-modal-buttons {
        display: flex;
        gap: 1rem;
        margin-top: 1.5rem;
    }
    
    .storage-modal-btn {
        padding: 10px 20px;
        border: none;
        border-radius: 8px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s;
        flex: 1;
    }
    
    .storage-modal-btn.save {
        background: var(--primary);
        color: white;
    }
    
    .storage-modal-btn.cancel {
        background: var(--light-bg);
        color: var(--text);
    }
    
    .storage-modal-btn.manage {
        background: var(--success);
        color: white;
    }

    /* Detailed View Modal */
    .detail-modal {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0, 0, 0, 0.9);
        z-index: 3000;
        align-items: center;
        justify-content: center;
        padding: 20px;
        animation: fadeIn 0.3s ease;
    }

    .detail-modal.active {
        display: flex;
    }

    .detail-modal-content {
        background: var(--card-bg);
        border-radius: 15px;
        padding: 30px;
        max-width: 800px;
        width: 100%;
        max-height: 80vh;
        overflow-y: auto;
        border: 2px solid var(--primary);
    }

    .detail-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 25px;
        padding-bottom: 15px;
        border-bottom: 2px solid var(--border-color);
    }

    .detail-title {
        font-size: 20px;
        font-weight: 700;
        color: white;
        display: flex;
        align-items: center;
        gap: 10px;
    }

    .close-modal {
        background: var(--light-bg);
        border: none;
        color: var(--text);
        width: 36px;
        height: 36px;
        border-radius: 50%;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 18px;
        transition: all 0.3s;
    }

    .close-modal:hover {
        background: var(--danger);
        color: white;
    }

    .detail-sections {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 20px;
    }

    .detail-section {
        background: rgba(255, 255, 255, 0.05);
        border-radius: 10px;
        padding: 20px;
    }

    .detail-section h3 {
        font-size: 14px;
        color: var(--text-secondary);
        margin-bottom: 15px;
        text-transform: uppercase;
        letter-spacing: 1px;
    }

    .detail-row {
        display: flex;
        justify-content: space-between;
        margin-bottom: 10px;
        font-size: 13px;
    }

    .detail-label {
        color: var(--text-secondary);
        font-weight: 500;
    }

    .detail-value {
        color: white;
        font-weight: 600;
    }

    .detail-value.win {
        color: var(--success);
    }

    .detail-value.loss {
        color: var(--danger);
    }

    .detail-value.pending {
        color: var(--warning);
    }

    .detail-value.accumulator {
        color: var(--accumulator-light);
    }

    .selections-list {
        margin-top: 15px;
    }

    .selection-item {
        background: rgba(255, 255, 255, 0.03);
        border-radius: 8px;
        padding: 12px;
        margin-bottom: 10px;
        border-left: 3px solid var(--primary);
    }

    .selection-item.won {
        border-left-color: var(--success);
    }

    .selection-item.lost {
        border-left-color: var(--danger);
    }

    .selection-item.pending {
        border-left-color: var(--warning);
    }

    /* Responsive */
    @media (max-width: 1024px) {
        .filter-controls {
            flex-direction: column;
        }
        
        .search-box {
            min-width: 100%;
        }
        
        .page-stats {
            gap: 15px;
        }
        
        .page-stat {
            min-width: 120px;
            padding: 12px 15px;
        }

        .quick-stats-bar {
            flex-direction: column;
        }
    }

    @media (max-width: 768px) {
        html { font-size: 13px; }
        
        .header {
            flex-direction: column;
            gap: 15px;
            padding: 15px;
        }
        
        .nav-links {
            width: 100%;
            justify-content: center;
            flex-wrap: wrap;
        }
        
        .container {
            padding: 15px;
        }
        
        .page-header {
            padding: 20px;
        }
        
        .page-header h1 {
            font-size: 22px;
        }
        
        .records-grid {
            grid-template-columns: 1fr;
        }
        
        .bets-table-container {
            padding: 15px;
            margin: 0 -15px;
            border-radius: 0;
            border-left: none;
            border-right: none;
        }
        
        .storage-btn {
            padding: 10px 18px;
            font-size: 13px;
        }

        .detail-sections {
            grid-template-columns: 1fr;
        }
    }

    @media (max-width: 480px) {
        html { font-size: 12px; }
        
        .page-stats {
            flex-direction: column;
            align-items: center;
        }
        
        .page-stat {
            width: 100%;
            max-width: 200px;
        }
        
        .action-buttons {
            flex-direction: column;
        }
        
        .pagination {
            flex-wrap: wrap;
        }
        
        .page-numbers {
            order: -1;
            width: 100%;
            justify-content: center;
            margin-bottom: 10px;
        }

        .filter-group {
            min-width: 100%;
        }
    }
</style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="logo">
            <i class="fas fa-list-ol"></i>
            XCrazyBet - All Bets Dashboard
        </div>
        
        <div class="nav-links">
            <a href="https://xcrazybet.github.io/millioner" class="nav-btn">
                <i class="fas fa-home"></i> Home
            </a>
            <a href="https://xcrazybet.github.io/millioner/games.html" class="nav-btn">
                <i class="fas fa-gamepad"></i> Games
            </a>
            <a href="https://xcrazybet.github.io/millioner/bets.html" class="nav-btn">
                <i class="fas fa-coins"></i> Place Bets
            </a>
            <a href="https://xcrazybet.github.io/millioner/dashboard.html" class="nav-btn">
                <i class="fas fa-wallet"></i> Wallet
            </a>
            <a href="https://xcrazybet.github.io/millioner/lists.bets.html" class="nav-btn active">
                <i class="fas fa-globe"></i> All Bets
            </a>
        </div>
    </header>

    <!-- Main Container -->
    <div class="container">
        <!-- Page Header -->
        <div class="page-header">
            <h1><i class="fas fa-globe-americas"></i> Global Bets Dashboard</h1>
            <p>View all bets placed by users worldwide. Includes single bets and accumulators. Bets automatically settle based on real API results.</p>
            
            <div class="page-stats">
                <div class="page-stat">
                    <div class="stat-value" id="totalBetsCount">0</div>
                    <div class="stat-label">Total Bets</div>
                </div>
                <div class="page-stat">
                    <div class="stat-value" id="liveBetsCount">0</div>
                    <div class="stat-label">Live Bets</div>
                </div>
                <div class="page-stat">
                    <div class="stat-value" id="accumulatorBetsCount">0</div>
                    <div class="stat-label">Accumulators</div>
                </div>
                <div class="page-stat">
                    <div class="stat-value" id="totalAmount">$0</div>
                    <div class="stat-label">Total Amount</div>
                </div>
            </div>
        </div>

        <!-- Quick Stats Bar -->
        <div class="quick-stats-bar">
            <div class="quick-stat">
                <div class="quick-stat-value" id="wonBetsCount">0</div>
                <div class="quick-stat-label">Won Bets</div>
            </div>
            <div class="quick-stat">
                <div class="quick-stat-value" id="lostBetsCount">0</div>
                <div class="quick-stat-label">Lost Bets</div>
            </div>
            <div class="quick-stat">
                <div class="quick-stat-value" id="pendingBetsCount">0</div>
                <div class="quick-stat-label">Pending</div>
            </div>
            <div class="quick-stat accumulator">
                <div class="quick-stat-value" id="wonAccumulatorsCount">0</div>
                <div class="quick-stat-label">Won Accumulators</div>
            </div>
        </div>

        <!-- Filters Section -->
        <section class="filters-section">
            <div class="filter-controls">
                <div class="filter-group">
                    <label class="filter-label">Status Filter</label>
                    <select class="filter-select" id="statusFilter">
                        <option value="all">All Statuses</option>
                        <option value="pending">Pending</option>
                        <option value="won">Won</option>
                        <option value="lost">Lost</option>
                        <option value="live">Live</option>
                        <option value="settled">Settled</option>
                    </select>
                </div>
                
                <div class="filter-group">
                    <label class="filter-label">Bet Type</label>
                    <select class="filter-select" id="betTypeFilter">
                        <option value="all">All Bet Types</option>
                        <option value="single">Single Bets</option>
                        <option value="accumulator">Accumulators</option>
                    </select>
                </div>
                
                <div class="filter-group">
                    <label class="filter-label">Sport Filter</label>
                    <select class="filter-select" id="sportFilter">
                        <option value="all">All Sports</option>
                        <option value="soccer">Soccer</option>
                        <option value="basketball">Basketball</option>
                        <option value="football">American Football</option>
                        <option value="hockey">Hockey</option>
                        <option value="tennis">Tennis</option>
                        <option value="mma">MMA</option>
                    </select>
                </div>
                
                <div class="filter-group search-box">
                    <label class="filter-label">Search Bets</label>
                    <input type="text" class="search-input" id="searchInput" placeholder="Search by match, user, or league...">
                    <div class="search-icon">
                        <i class="fas fa-search"></i>
                    </div>
                </div>
            </div>
            
            <div class="active-filters" id="activeFilters">
                <!-- Active filters will appear here -->
            </div>
        </section>

        <!-- Bets Table -->
        <section class="bets-table-container">
            <div class="loading" id="loadingBets">
                <i class="fas fa-spinner"></i>
                <p>Loading live bets...</p>
            </div>
            
            <div class="empty-state" id="emptyBets" style="display: none;">
                <i class="fas fa-clipboard-list"></i>
                <p>No bets found matching your criteria</p>
                <p style="font-size: 11px; margin-top: 5px;">Try changing your filters or check back later</p>
            </div>
            
            <table class="bets-table" id="betsTable" style="display: none;">
                <thead>
                    <tr>
                        <th style="width: 60px;">#</th>
                        <th>Bet Details</th>
                        <th>User</th>
                        <th>Type</th>
                        <th>Odds</th>
                        <th>Amount</th>
                        <th>Potential Win</th>
                        <th>Status</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody id="betsTableBody">
                    <!-- Bets will be populated here -->
                </tbody>
            </table>
        </section>

        <!-- Records Section (Last 3 Days) -->
        <section class="records-section">
            <div class="records-header">
                <h2 style="color: white; font-size: 18px;">
                    <i class="fas fa-history"></i> Last 3 Days Performance
                </h2>
                <span style="font-size: 12px; color: var(--text-secondary);">
                    Updated in real-time
                </span>
            </div>
            
            <div class="records-grid" id="recordsGrid">
                <!-- Records will be populated here -->
            </div>
        </section>

        <!-- Pagination -->
        <div class="pagination" id="pagination" style="display: none;">
            <button class="page-btn" id="prevPage" disabled>
                <i class="fas fa-chevron-left"></i> Previous
            </button>
            
            <div class="page-numbers" id="pageNumbers">
                <!-- Page numbers will be populated here -->
            </div>
            
            <button class="page-btn" id="nextPage">
                Next <i class="fas fa-chevron-right"></i>
            </button>
        </div>
    </div>

    <!-- Storage Integration Button -->
    <button class="storage-btn" onclick="showStorageModal()">
        <i class="fas fa-save"></i> Save to Storage
    </button>

    <!-- Storage Modal -->
    <div id="storageModal" class="storage-modal">
        <div class="storage-modal-content">
            <h2>Save to Bet Storage</h2>
            <p style="margin-bottom: 1.5rem; color: var(--text-secondary);">
                Save your filtered bet list to the 30-day storage system.
            </p>
            
            <div style="margin-bottom: 1.5rem;">
                <label style="display: block; margin-bottom: 0.5rem; font-weight: 600;">
                    Storage Title
                </label>
                <input type="text" id="storageTitle" 
                       placeholder="Enter a title for this save">
            </div>
            
            <div class="storage-modal-buttons">
                <button class="storage-modal-btn save" onclick="saveCurrentListToStorage()">
                    <i class="fas fa-save"></i> Save Now
                </button>
                <button class="storage-modal-btn cancel" onclick="hideStorageModal()">
                    Cancel
                </button>
                <button class="storage-modal-btn manage" onclick="openStorageManager()">
                    <i class="fas fa-cog"></i> Manage Storage
                </button>
            </div>
        </div>
    </div>

    <!-- Detailed View Modal -->
    <div id="detailModal" class="detail-modal">
        <div class="detail-modal-content">
            <div class="detail-header">
                <div class="detail-title" id="detailTitle">
                    <i class="fas fa-info-circle"></i> Bet Details
                </div>
                <button class="close-modal" onclick="hideDetailModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <div class="detail-sections" id="detailSections">
                <!-- Details will be populated here -->
            </div>
        </div>
    </div>

    <script>
        // ===== FIREBASE CONFIG =====
        const firebaseConfig = {
            apiKey: "AIzaSyA72Yo_YGqno9PX25p3yQBvyflcaM-NqEM",
            authDomain: "x-bet-prod-jd.firebaseapp.com",
            projectId: "x-bet-prod-jd",
            storageBucket: "x-bet-prod-jd.firebasestorage.app",
            messagingSenderId: "499334334535",
            appId: "1:499334334535:web:bebc1bf817e24d9e3c4962",
            measurementId: "G-PTV4XMYQ6P"
        };

        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();
        const db = firebase.firestore();

        // ===== GLOBAL STATE =====
        const appState = {
            currentUser: null,
            allBets: [],
            filteredBets: [],
            records: [],
            currentPage: 1,
            itemsPerPage: 20,
            totalPages: 1,
            currentFilters: {
                status: 'all',
                betType: 'all',
                sport: 'all',
                search: ''
            },
            liveStats: {
                totalBets: 0,
                liveBets: 0,
                accumulatorBets: 0,
                wonBets: 0,
                lostBets: 0,
                pendingBets: 0,
                wonAccumulators: 0,
                totalAmount: 0
            },
            selectedBet: null
        };

        // ===== INITIALIZATION =====
        document.addEventListener('DOMContentLoaded', () => {
            initializeApp();
        });

        // ===== INITIALIZE APP =====
        async function initializeApp() {
            try {
                // Check authentication
                auth.onAuthStateChanged(user => {
                    appState.currentUser = user;
                    loadAllBets();
                    loadRecords();
                    setupEventListeners();
                });
            } catch (error) {
                console.error('Initialization error:', error);
                showMessage('Error loading bets data', 'error');
            }
        }

        // ===== LOAD ALL BETS =====
        async function loadAllBets() {
            try {
                showLoading(true);
                
                // Listen to all_bets collection in real-time
                db.collection("all_bets")
                    .orderBy("placedAt", "desc")
                    .limit(200) // Increased limit for better data
                    .onSnapshot(async (snapshot) => {
                        appState.allBets = [];
                        
                        snapshot.forEach(doc => {
                            const bet = doc.data();
                            bet.id = doc.id;
                            
                            // Convert Firestore timestamps
                            if (bet.placedAt && bet.placedAt.toDate) {
                                bet.placedAt = bet.placedAt.toDate();
                            }
                            if (bet.settledAt && bet.settledAt.toDate) {
                                bet.settledAt = bet.settledAt.toDate();
                            }
                            if (bet.commenceTime && bet.commenceTime.toDate) {
                                bet.commenceTime = bet.commenceTime.toDate();
                            }
                            
                            // Calculate if bet is live
                            if (bet.commenceTime && !bet.settledAt) {
                                const now = new Date();
                                const commenceTime = bet.commenceTime instanceof Date ? bet.commenceTime : new Date(bet.commenceTime);
                                const threeHoursAgo = new Date(now.getTime() - 3 * 60 * 60 * 1000);
                                bet.isLive = commenceTime <= now && commenceTime >= threeHoursAgo;
                            }
                            
                            // Set bet type if not defined (for backward compatibility)
                            if (!bet.type) {
                                bet.type = 'single';
                            }
                            
                            appState.allBets.push(bet);
                        });
                        
                        updateLiveStats();
                        applyFilters();
                        updateTable();
                        showLoading(false);
                        
                    }, (error) => {
                        console.error('Error loading bets:', error);
                        showLoading(false);
                        showMessage('Error loading bets data', 'error');
                    });
                    
            } catch (error) {
                console.error('Error loading bets:', error);
                showLoading(false);
                showMessage('Error loading bets data', 'error');
            }
        }

        // ===== UPDATE LIVE STATS =====
        function updateLiveStats() {
            const stats = {
                totalBets: appState.allBets.length,
                liveBets: appState.allBets.filter(b => b.isLive && b.status === 'pending').length,
                accumulatorBets: appState.allBets.filter(b => b.type === 'accumulator').length,
                wonBets: appState.allBets.filter(b => b.status === 'won').length,
                lostBets: appState.allBets.filter(b => b.status === 'lost').length,
                pendingBets: appState.allBets.filter(b => b.status === 'pending').length,
                wonAccumulators: appState.allBets.filter(b => b.type === 'accumulator' && b.status === 'won').length,
                totalAmount: appState.allBets.reduce((sum, b) => sum + (b.amount || 0), 0)
            };
            
            appState.liveStats = stats;
            
            // Update UI
            document.getElementById('totalBetsCount').textContent = stats.totalBets.toLocaleString();
            document.getElementById('liveBetsCount').textContent = stats.liveBets.toLocaleString();
            document.getElementById('accumulatorBetsCount').textContent = stats.accumulatorBets.toLocaleString();
            document.getElementById('totalAmount').textContent = `$${stats.totalAmount.toLocaleString()}`;
            
            // Update quick stats
            document.getElementById('wonBetsCount').textContent = stats.wonBets.toLocaleString();
            document.getElementById('lostBetsCount').textContent = stats.lostBets.toLocaleString();
            document.getElementById('pendingBetsCount').textContent = stats.pendingBets.toLocaleString();
            document.getElementById('wonAccumulatorsCount').textContent = stats.wonAccumulators.toLocaleString();
        }

        // ===== LOAD RECORDS (LAST 3 DAYS) =====
        async function loadRecords() {
            try {
                const threeDaysAgo = new Date(Date.now() - 3 * 24 * 60 * 60 * 1000);
                
                const snapshot = await db.collection("all_bets")
                    .where("placedAt", ">=", threeDaysAgo)
                    .orderBy("placedAt", "desc")
                    .limit(100)
                    .get();
                
                const bets = [];
                snapshot.forEach(doc => {
                    const bet = doc.data();
                    if (bet.placedAt && bet.placedAt.toDate) {
                        bet.placedAt = bet.placedAt.toDate();
                    }
                    bets.push(bet);
                });
                
                // Group by day and calculate stats
                const recordsByDay = groupBetsByDay(bets);
                displayRecords(recordsByDay);
                
            } catch (error) {
                console.error('Error loading records:', error);
            }
        }

        function groupBetsByDay(bets) {
            const days = {};
            
            bets.forEach(bet => {
                if (!bet.placedAt) return;
                
                const date = bet.placedAt instanceof Date ? bet.placedAt : new Date(bet.placedAt);
                const dayKey = date.toISOString().split('T')[0];
                const dayName = date.toLocaleDateString('en-US', { weekday: 'short', month: 'short', day: 'numeric' });
                
                if (!days[dayKey]) {
                    days[dayKey] = {
                        date: dayKey,
                        dayName: dayName,
                        totalBets: 0,
                        totalAmount: 0,
                        wonBets: 0,
                        lostBets: 0,
                        pendingBets: 0,
                        totalWon: 0,
                        totalLost: 0,
                        accumulatorBets: 0,
                        accumulatorWins: 0
                    };
                }
                
                const day = days[dayKey];
                day.totalBets++;
                day.totalAmount += bet.amount || 0;
                
                if (bet.type === 'accumulator') {
                    day.accumulatorBets++;
                    if (bet.status === 'won') {
                        day.accumulatorWins++;
                    }
                }
                
                if (bet.status === 'won') {
                    day.wonBets++;
                    day.totalWon += bet.winAmount || (bet.amount * (bet.totalOdds || bet.odds));
                } else if (bet.status === 'lost') {
                    day.lostBets++;
                    day.totalLost += bet.amount || 0;
                } else if (bet.status === 'pending') {
                    day.pendingBets++;
                }
            });
            
            // Convert to array and sort by date descending
            return Object.values(days)
                .sort((a, b) => new Date(b.date) - new Date(a.date))
                .slice(0, 5);
        }

        function displayRecords(records) {
            const container = document.getElementById('recordsGrid');
            container.innerHTML = '';
            
            if (records.length === 0) {
                container.innerHTML = `
                    <div class="record-card">
                        <div class="record-header">
                            <div class="record-title">No recent records</div>
                        </div>
                        <p style="color: var(--text-secondary); font-size: 12px;">
                            No bets placed in the last 3 days
                        </p>
                    </div>
                `;
                return;
            }
            
            records.forEach(record => {
                const winRate = record.totalBets > 0 ? 
                    Math.round((record.wonBets / record.totalBets) * 100) : 0;
                
                const accumulatorRate = record.accumulatorBets > 0 ?
                    Math.round((record.accumulatorWins / record.accumulatorBets) * 100) : 0;
                
                const profitLoss = record.totalWon - record.totalLost;
                
                const recordCard = document.createElement('div');
                recordCard.className = 'record-card';
                recordCard.innerHTML = `
                    <div class="record-header">
                        <div class="record-title">${record.dayName}</div>
                        <div class="record-date">${record.date}</div>
                    </div>
                    
                    <div style="font-size: 24px; font-weight: 700; color: var(--accent); margin: 10px 0;">
                        ${record.totalBets} bets
                    </div>
                    
                    <div class="record-stats">
                        <div class="record-stat">
                            <div class="record-stat-value">${record.wonBets}</div>
                            <div class="record-stat-label">Won</div>
                        </div>
                        <div class="record-stat">
                            <div class="record-stat-value">${record.lostBets}</div>
                            <div class="record-stat-label">Lost</div>
                        </div>
                        <div class="record-stat">
                            <div class="record-stat-value">${record.pendingBets}</div>
                            <div class="record-stat-label">Pending</div>
                        </div>
                        <div class="record-stat">
                            <div class="record-stat-value">${record.accumulatorBets}</div>
                            <div class="record-stat-label">Accumulators</div>
                        </div>
                    </div>
                    
                    <div style="margin-top: 15px; padding-top: 15px; border-top: 1px solid rgba(255, 255, 255, 0.1);">
                        <div style="margin-bottom: 10px;">
                            <div style="display: flex; justify-content: space-between; font-size: 11px; color: var(--text-secondary);">
                                <span>Win Rate: <strong>${winRate}%</strong></span>
                                <span>Accumulator Win: <strong>${accumulatorRate}%</strong></span>
                            </div>
                        </div>
                        <div style="display: flex; justify-content: space-between; font-size: 11px; color: var(--text-secondary);">
                            <span>Total: $${record.totalAmount.toLocaleString()}</span>
                            <span style="color: ${profitLoss >= 0 ? 'var(--success)' : 'var(--danger)'}">
                                Profit: $${profitLoss.toLocaleString()}
                            </span>
                        </div>
                    </div>
                `;
                
                container.appendChild(recordCard);
            });
        }

        // ===== FILTER FUNCTIONS =====
        function applyFilters() {
            const filters = appState.currentFilters;
            let filtered = [...appState.allBets];
            
            // Apply status filter
            if (filters.status !== 'all') {
                if (filters.status === 'live') {
                    filtered = filtered.filter(bet => bet.isLive && bet.status === 'pending');
                } else if (filters.status === 'settled') {
                    filtered = filtered.filter(bet => bet.status === 'won' || bet.status === 'lost');
                } else {
                    filtered = filtered.filter(bet => bet.status === filters.status);
                }
            }
            
            // Apply bet type filter
            if (filters.betType !== 'all') {
                if (filters.betType === 'accumulator') {
                    filtered = filtered.filter(bet => bet.type === 'accumulator');
                } else if (filters.betType === 'single') {
                    filtered = filtered.filter(bet => !bet.type || bet.type === 'single');
                }
            }
            
            // Apply sport filter
            if (filters.sport !== 'all') {
                filtered = filtered.filter(bet => {
                    const sport = bet.sport || '';
                    return sport.toLowerCase().includes(filters.sport.toLowerCase());
                });
            }
            
            // Apply search filter
            if (filters.search.trim()) {
                const searchTerm = filters.search.toLowerCase();
                filtered = filtered.filter(bet => {
                    // Search in different fields
                    const matchSearch = (bet.match && bet.match.toLowerCase().includes(searchTerm)) ||
                                       (bet.league && bet.league.toLowerCase().includes(searchTerm)) ||
                                       (bet.userName && bet.userName.toLowerCase().includes(searchTerm)) ||
                                       (bet.userEmail && bet.userEmail.toLowerCase().includes(searchTerm));
                    
                    // Search in accumulator selections
                    if (!matchSearch && bet.type === 'accumulator' && bet.selections) {
                        const selectionSearch = bet.selections.some(selection => 
                            selection.matchName && selection.matchName.toLowerCase().includes(searchTerm) ||
                            selection.league && selection.league.toLowerCase().includes(searchTerm)
                        );
                        return selectionSearch;
                    }
                    
                    return matchSearch;
                });
            }
            
            appState.filteredBets = filtered;
            appState.totalPages = Math.ceil(filtered.length / appState.itemsPerPage);
            appState.currentPage = 1;
            
            updateActiveFiltersDisplay();
            updatePagination();
        }

        function updateActiveFiltersDisplay() {
            const container = document.getElementById('activeFilters');
            container.innerHTML = '';
            
            const filters = appState.currentFilters;
            const filteredCount = appState.filteredBets.length;
            const totalCount = appState.allBets.length;
            
            // Add filter tags
            if (filters.status !== 'all') {
                addFilterTag(`Status: ${filters.status}`, 'status');
            }
            
            if (filters.betType !== 'all') {
                addFilterTag(`Type: ${filters.betType}`, 'betType');
            }
            
            if (filters.sport !== 'all') {
                addFilterTag(`Sport: ${filters.sport}`, 'sport');
            }
            
            if (filters.search.trim()) {
                addFilterTag(`Search: "${filters.search}"`, 'search');
            }
            
            // Add info tag showing results
            if (filteredCount < totalCount) {
                const infoTag = document.createElement('div');
                infoTag.className = 'filter-tag';
                infoTag.style.background = 'rgba(16, 185, 129, 0.2)';
                infoTag.style.color = '#10b981';
                infoTag.innerHTML = `
                    Showing ${filteredCount} of ${totalCount} bets
                `;
                container.appendChild(infoTag);
            }
            
            function addFilterTag(text, type) {
                const tag = document.createElement('div');
                tag.className = 'filter-tag';
                tag.innerHTML = `
                    ${text}
                    <span class="remove" onclick="removeFilter('${type}')">
                        <i class="fas fa-times"></i>
                    </span>
                `;
                container.appendChild(tag);
            }
        }

        function removeFilter(type) {
            switch(type) {
                case 'status':
                    document.getElementById('statusFilter').value = 'all';
                    appState.currentFilters.status = 'all';
                    break;
                case 'betType':
                    document.getElementById('betTypeFilter').value = 'all';
                    appState.currentFilters.betType = 'all';
                    break;
                case 'sport':
                    document.getElementById('sportFilter').value = 'all';
                    appState.currentFilters.sport = 'all';
                    break;
                case 'search':
                    document.getElementById('searchInput').value = '';
                    appState.currentFilters.search = '';
                    break;
            }
            applyFilters();
            updateTable();
        }

        // ===== UPDATE TABLE =====
        function updateTable() {
            const tableBody = document.getElementById('betsTableBody');
            const emptyState = document.getElementById('emptyBets');
            const table = document.getElementById('betsTable');
            const pagination = document.getElementById('pagination');
            
            // Calculate pagination
            const startIndex = (appState.currentPage - 1) * appState.itemsPerPage;
            const endIndex = startIndex + appState.itemsPerPage;
            const currentPageBets = appState.filteredBets.slice(startIndex, endIndex);
            
            if (currentPageBets.length === 0) {
                table.style.display = 'none';
                pagination.style.display = 'none';
                emptyState.style.display = 'block';
                return;
            }
            
            table.style.display = 'table';
            pagination.style.display = 'flex';
            emptyState.style.display = 'none';
            tableBody.innerHTML = '';
            
            currentPageBets.forEach((bet, index) => {
                const absoluteIndex = startIndex + index + 1;
                const row = document.createElement('tr');
                
                if (bet.type === 'accumulator') {
                    row.className = 'accumulator-row';
                    renderAccumulatorRow(row, bet, absoluteIndex);
                } else {
                    renderSingleBetRow(row, bet, absoluteIndex);
                }
                
                tableBody.appendChild(row);
            });
        }

        function renderSingleBetRow(row, bet, index) {
            // Format dates
            const placedTime = bet.placedAt ? 
                new Date(bet.placedAt).toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'}) : 
                'N/A';
            
            const placedDate = bet.placedAt ? 
                new Date(bet.placedAt).toLocaleDateString() : 
                'N/A';
            
            // Determine status display
            let statusText = bet.status || 'pending';
            let statusClass = `status-${statusText}`;
            
            if (bet.isLive && statusText === 'pending') {
                statusText = 'LIVE';
                statusClass = 'status-pending';
            }
            
            // Determine bet type class
            const betTypeClass = bet.betType === 'home' ? 'home' : 
                               bet.betType === 'away' ? 'away' : 'draw';
            
            // Get user initials for avatar
            const userName = bet.userName || bet.userEmail || 'User';
            const userInitials = userName.substring(0, 2).toUpperCase();
            
            row.innerHTML = `
                <td class="bet-number">${index}</td>
                <td>
                    <div class="bet-match">
                        ${bet.match || 'Unknown Match'}
                        ${bet.isLive && bet.status === 'pending' ? 
                            '<span class="live-indicator"><i class="fas fa-circle"></i> LIVE</span>' : ''}
                    </div>
                    <div class="bet-league">${bet.league || 'Unknown League'}</div>
                </td>
                <td>
                    <div class="user-info">
                        <div class="user-avatar">${userInitials}</div>
                        <div class="user-details">
                            <div class="user-name">${userName}</div>
                            <div class="user-time">${placedDate} ${placedTime}</div>
                        </div>
                    </div>
                </td>
                <td>
                    <span class="bet-type ${betTypeClass}">
                        ${bet.betType ? bet.betType.toUpperCase() : 'N/A'}
                    </span>
                </td>
                <td class="bet-odds">${bet.odds ? bet.odds.toFixed(2) + 'x' : 'N/A'}</td>
                <td class="bet-amount">$${bet.amount ? bet.amount.toFixed(2) : '0.00'}</td>
                <td class="potential-win">
                    ${bet.potentialWin ? '$' + bet.potentialWin.toFixed(2) : 
                      bet.winAmount ? '$' + bet.winAmount.toFixed(2) : 
                      bet.amount && bet.odds ? '$' + (bet.amount * bet.odds).toFixed(2) : 'N/A'}
                </td>
                <td>
                    <span class="status-badge ${statusClass}">
                        ${statusText.toUpperCase()}
                    </span>
                </td>
                <td>
                    <div class="action-buttons">
                        <button class="action-btn view" onclick="viewSingleBetDetails('${bet.id}')">
                            <i class="fas fa-eye"></i> View
                        </button>
                        <button class="action-btn save" onclick="saveSingleBet('${bet.id}')">
                            <i class="fas fa-save"></i> Save
                        </button>
                    </div>
                </td>
            `;
        }

        function renderAccumulatorRow(row, bet, index) {
            // Format dates
            const placedTime = bet.placedAt ? 
                new Date(bet.placedAt).toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'}) : 
                'N/A';
            
            const placedDate = bet.placedAt ? 
                new Date(bet.placedAt).toLocaleDateString() : 
                'N/A';
            
            // Determine status display
            let statusText = bet.status || 'pending';
            let statusClass = `status-${statusText}`;
            
            if (statusText === 'pending') {
                statusClass = 'status-accumulator';
            }
            
            // Get user initials for avatar
            const userName = bet.userName || bet.userEmail || 'User';
            const userInitials = userName.substring(0, 2).toUpperCase();
            
            // Get selection details
            const selections = bet.selections || [];
            const selectionCount = selections.length;
            const firstTwoSelections = selections.slice(0, 2);
            
            row.innerHTML = `
                <td class="bet-number">${index}</td>
                <td>
                    <div class="bet-match">
                        Accumulator (${selectionCount} selections)
                        <span class="accumulator-indicator">
                            <i class="fas fa-layer-group"></i> ACCUMULATOR
                        </span>
                    </div>
                    <div class="accumulator-details">
                        ${firstTwoSelections.map((selection, idx) => `
                            <div class="accumulator-selection">
                                ${idx + 1}. ${selection.matchName} - ${selection.betType.toUpperCase()} @ ${selection.odds}
                            </div>
                        `).join('')}
                        ${selectionCount > 2 ? `<div>+${selectionCount - 2} more selections</div>` : ''}
                    </div>
                </td>
                <td>
                    <div class="user-info accumulator">
                        <div class="user-avatar">${userInitials}</div>
                        <div class="user-details">
                            <div class="user-name">${userName}</div>
                            <div class="user-time">${placedDate} ${placedTime}</div>
                        </div>
                    </div>
                </td>
                <td>
                    <span class="bet-type accumulator">
                        MULTI
                    </span>
                </td>
                <td class="bet-odds">${bet.totalOdds ? bet.totalOdds.toFixed(2) + 'x' : 'N/A'}</td>
                <td class="bet-amount">$${bet.amount ? bet.amount.toFixed(2) : '0.00'}</td>
                <td class="potential-win">
                    ${bet.potentialWin ? '$' + bet.potentialWin.toFixed(2) : 
                      bet.winAmount ? '$' + bet.winAmount.toFixed(2) : 
                      bet.amount && bet.totalOdds ? '$' + (bet.amount * bet.totalOdds).toFixed(2) : 'N/A'}
                </td>
                <td>
                    <span class="status-badge ${statusClass}">
                        ${statusText.toUpperCase()}
                    </span>
                </td>
                <td>
                    <div class="action-buttons">
                        <button class="action-btn accumulator" onclick="viewAccumulatorDetails('${bet.id}')">
                            <i class="fas fa-list"></i> View All
                        </button>
                        <button class="action-btn save" onclick="saveSingleBet('${bet.id}')">
                            <i class="fas fa-save"></i> Save
                        </button>
                    </div>
                </td>
            `;
        }

        // ===== DETAIL VIEW FUNCTIONS =====
        function viewSingleBetDetails(betId) {
            const bet = appState.allBets.find(b => b.id === betId);
            if (!bet) return;
            
            appState.selectedBet = bet;
            
            const title = document.getElementById('detailTitle');
            const sections = document.getElementById('detailSections');
            
            title.innerHTML = `<i class="fas fa-info-circle"></i> Single Bet Details`;
            
            let selectionsHTML = '';
            if (bet.selections && Array.isArray(bet.selections)) {
                selectionsHTML = `
                    <div class="detail-section">
                        <h3><i class="fas fa-list"></i> Selections</h3>
                        <div class="selections-list">
                            ${bet.selections.map((selection, idx) => `
                                <div class="selection-item ${selection.result || 'pending'}">
                                    <div class="detail-row">
                                        <span class="detail-label">${idx + 1}. Match:</span>
                                        <span class="detail-value">${selection.matchName || 'N/A'}</span>
                                    </div>
                                    <div class="detail-row">
                                        <span class="detail-label">Bet Type:</span>
                                        <span class="detail-value">${selection.betType ? selection.betType.toUpperCase() : 'N/A'}</span>
                                    </div>
                                    <div class="detail-row">
                                        <span class="detail-label">Odds:</span>
                                        <span class="detail-value">${selection.odds || 'N/A'}</span>
                                    </div>
                                    <div class="detail-row">
                                        <span class="detail-label">Result:</span>
                                        <span class="detail-value ${selection.result || 'pending'}">
                                            ${selection.result ? selection.result.toUpperCase() : 'PENDING'}
                                        </span>
                                    </div>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                `;
            }
            
            sections.innerHTML = `
                <div class="detail-section">
                    <h3><i class="fas fa-user"></i> User Info</h3>
                    <div class="detail-row">
                        <span class="detail-label">User Name:</span>
                        <span class="detail-value">${bet.userName || bet.userEmail || 'Anonymous'}</span>
                    </div>
                    <div class="detail-row">
                        <span class="detail-label">Placed At:</span>
                        <span class="detail-value">${bet.placedAt ? new Date(bet.placedAt).toLocaleString() : 'N/A'}</span>
                    </div>
                    <div class="detail-row">
                        <span class="detail-label">Settled At:</span>
                        <span class="detail-value">${bet.settledAt ? new Date(bet.settledAt).toLocaleString() : 'Not yet'}</span>
                    </div>
                </div>
                
                <div class="detail-section">
                    <h3><i class="fas fa-coins"></i> Bet Details</h3>
                    <div class="detail-row">
                        <span class="detail-label">Match:</span>
                        <span class="detail-value">${bet.match || 'N/A'}</span>
                    </div>
                    <div class="detail-row">
                        <span class="detail-label">League:</span>
                        <span class="detail-value">${bet.league || 'N/A'}</span>
                    </div>
                    <div class="detail-row">
                        <span class="detail-label">Sport:</span>
                        <span class="detail-value">${bet.sport || 'N/A'}</span>
                    </div>
                    <div class="detail-row">
                        <span class="detail-label">Bet Type:</span>
                        <span class="detail-value">${bet.betType ? bet.betType.toUpperCase() : 'N/A'}</span>
                    </div>
                </div>
                
                <div class="detail-section">
                    <h3><i class="fas fa-chart-line"></i> Financials</h3>
                    <div class="detail-row">
                        <span class="detail-label">Stake:</span>
                        <span class="detail-value">$${bet.amount ? bet.amount.toFixed(2) : '0.00'}</span>
                    </div>
                    <div class="detail-row">
                        <span class="detail-label">Odds:</span>
                        <span class="detail-value">${bet.odds ? bet.odds.toFixed(2) + 'x' : 'N/A'}</span>
                    </div>
                    <div class="detail-row">
                        <span class="detail-label">Potential Win:</span>
                        <span class="detail-value">$${bet.potentialWin ? bet.potentialWin.toFixed(2) : 'N/A'}</span>
                    </div>
                    <div class="detail-row">
                        <span class="detail-label">Actual Win:</span>
                        <span class="detail-value ${bet.status === 'won' ? 'win' : bet.status === 'lost' ? 'loss' : 'pending'}">
                            ${bet.winAmount ? '$' + bet.winAmount.toFixed(2) : 'N/A'}
                        </span>
                    </div>
                </div>
                
                <div class="detail-section">
                    <h3><i class="fas fa-flag-checkered"></i> Status</h3>
                    <div class="detail-row">
                        <span class="detail-label">Status:</span>
                        <span class="detail-value ${bet.status || 'pending'}">
                            ${bet.status ? bet.status.toUpperCase() : 'PENDING'}
                        </span>
                    </div>
                    <div class="detail-row">
                        <span class="detail-label">Result:</span>
                        <span class="detail-value ${bet.result || 'pending'}">
                            ${bet.result ? bet.result.toUpperCase() : 'PENDING'}
                        </span>
                    </div>
                    <div class="detail-row">
                        <span class="detail-label">Live Status:</span>
                        <span class="detail-value">${bet.isLive ? 'LIVE NOW' : 'Not Live'}</span>
                    </div>
                    <div class="detail-row">
                        <span class="detail-label">Commence Time:</span>
                        <span class="detail-value">${bet.commenceTime ? new Date(bet.commenceTime).toLocaleString() : 'N/A'}</span>
                    </div>
                </div>
                
                ${selectionsHTML}
            `;
            
            document.getElementById('detailModal').classList.add('active');
        }

        function viewAccumulatorDetails(betId) {
            const bet = appState.allBets.find(b => b.id === betId);
            if (!bet || bet.type !== 'accumulator') return;
            
            appState.selectedBet = bet;
            
            const title = document.getElementById('detailTitle');
            const sections = document.getElementById('detailSections');
            
            title.innerHTML = `<i class="fas fa-layer-group"></i> Accumulator Bet Details`;
            
            const selections = bet.selections || [];
            const selectionStatus = selections.map(s => s.result || 'pending');
            const allWon = selectionStatus.every(s => s === 'win');
            const anyLost = selectionStatus.some(s => s === 'loss');
            
            sections.innerHTML = `
                <div class="detail-section">
                    <h3><i class="fas fa-user"></i> User Info</h3>
                    <div class="detail-row">
                        <span class="detail-label">User Name:</span>
                        <span class="detail-value">${bet.userName || bet.userEmail || 'Anonymous'}</span>
                    </div>
                    <div class="detail-row">
                        <span class="detail-label">Placed At:</span>
                        <span class="detail-value">${bet.placedAt ? new Date(bet.placedAt).toLocaleString() : 'N/A'}</span>
                    </div>
                    <div class="detail-row">
                        <span class="detail-label">Settled At:</span>
                        <span class="detail-value">${bet.settledAt ? new Date(bet.settledAt).toLocaleString() : 'Not yet'}</span>
                    </div>
                </div>
                
                <div class="detail-section">
                    <h3><i class="fas fa-chart-line"></i> Accumulator Summary</h3>
                    <div class="detail-row">
                        <span class="detail-label">Total Selections:</span>
                        <span class="detail-value">${selections.length}</span>
                    </div>
                    <div class="detail-row">
                        <span class="detail-label">Total Odds:</span>
                        <span class="detail-value accumulator">${bet.totalOdds ? bet.totalOdds.toFixed(2) + 'x' : 'N/A'}</span>
                    </div>
                    <div class="detail-row">
                        <span class="detail-label">Stake:</span>
                        <span class="detail-value">$${bet.amount ? bet.amount.toFixed(2) : '0.00'}</span>
                    </div>
                    <div class="detail-row">
                        <span class="detail-label">Potential Win:</span>
                        <span class="detail-value">$${bet.potentialWin ? bet.potentialWin.toFixed(2) : 'N/A'}</span>
                    </div>
                    <div class="detail-row">
                        <span class="detail-label">Actual Win:</span>
                        <span class="detail-value ${bet.status === 'won' ? 'win' : bet.status === 'lost' ? 'loss' : 'pending'}">
                            ${bet.winAmount ? '$' + bet.winAmount.toFixed(2) : 'N/A'}
                        </span>
                    </div>
                    <div class="detail-row">
                        <span class="detail-label">Accumulator Rule:</span>
                        <span class="detail-value">All selections must win for payout</span>
                    </div>
                </div>
                
                <div class="detail-section">
                    <h3><i class="fas fa-flag-checkered"></i> Status</h3>
                    <div class="detail-row">
                        <span class="detail-label">Status:</span>
                        <span class="detail-value ${bet.status || 'pending'}">
                            ${bet.status ? bet.status.toUpperCase() : 'PENDING'}
                        </span>
                    </div>
                    <div class="detail-row">
                        <span class="detail-label">Result:</span>
                        <span class="detail-value ${bet.result || 'pending'}">
                            ${bet.result ? bet.result.toUpperCase() : 'PENDING'}
                        </span>
                    </div>
                    <div class="detail-row">
                        <span class="detail-label">Selections Status:</span>
                        <span class="detail-value ${allWon ? 'win' : anyLost ? 'loss' : 'pending'}">
                            ${selectionStatus.filter(s => s === 'win').length} won / 
                            ${selectionStatus.filter(s => s === 'loss').length} lost / 
                            ${selectionStatus.filter(s => s === 'pending' || !s).length} pending
                        </span>
                    </div>
                    <div class="detail-row">
                        <span class="detail-label">Accumulator Outcome:</span>
                        <span class="detail-value accumulator">
                            ${allWon ? 'ALL WON - PAYOUT!' : 
                              anyLost ? 'ONE LOST - ENTIRE BET LOST' : 
                              'PENDING - ALL MUST WIN'}
                        </span>
                    </div>
                </div>
                
                <div class="detail-section" style="grid-column: 1 / -1;">
                    <h3><i class="fas fa-list"></i> All Selections (${selections.length})</h3>
                    <div class="selections-list">
                        ${selections.map((selection, idx) => `
                            <div class="selection-item ${selection.result || 'pending'}">
                                <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 8px;">
                                    <div style="flex: 1;">
                                        <div style="font-weight: 600; margin-bottom: 4px;">
                                            ${idx + 1}. ${selection.matchName || 'Unknown Match'}
                                        </div>
                                        <div style="font-size: 11px; color: var(--text-secondary);">
                                            ${selection.league || ''}
                                        </div>
                                    </div>
                                    <div style="text-align: right; min-width: 80px;">
                                        <div style="font-weight: 700; color: var(--accent);">
                                            @ ${selection.odds}
                                        </div>
                                        <div style="font-size: 10px; padding: 2px 6px; border-radius: 4px; 
                                             background: ${selection.result === 'win' ? 'rgba(16, 185, 129, 0.2)' : 
                                                       selection.result === 'loss' ? 'rgba(239, 68, 68, 0.2)' : 
                                                       'rgba(245, 158, 11, 0.2)'};
                                             color: ${selection.result === 'win' ? '#10b981' : 
                                                    selection.result === 'loss' ? '#ef4444' : 
                                                    '#f59e0b'};">
                                            ${selection.result ? selection.result.toUpperCase() : 'PENDING'}
                                        </div>
                                    </div>
                                </div>
                                <div style="display: flex; gap: 15px; font-size: 11px; color: var(--text-secondary);">
                                    <span>Bet: <strong>${selection.betType ? selection.betType.toUpperCase() : 'N/A'}</strong></span>
                                    <span>Added: ${selection.addedAt ? new Date(selection.addedAt).toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'}) : ''}</span>
                                </div>
                            </div>
                        `).join('')}
                    </div>
                </div>
            `;
            
            document.getElementById('detailModal').classList.add('active');
        }

        function hideDetailModal() {
            document.getElementById('detailModal').classList.remove('active');
            appState.selectedBet = null;
        }

        // ===== PAGINATION =====
        function updatePagination() {
            const prevBtn = document.getElementById('prevPage');
            const nextBtn = document.getElementById('nextPage');
            const pageNumbers = document.getElementById('pageNumbers');
            
            // Update button states
            prevBtn.disabled = appState.currentPage === 1;
            nextBtn.disabled = appState.currentPage === appState.totalPages;
            
            // Update page numbers
            pageNumbers.innerHTML = '';
            
            const maxPagesToShow = 5;
            let startPage = Math.max(1, appState.currentPage - Math.floor(maxPagesToShow / 2));
            let endPage = Math.min(appState.totalPages, startPage + maxPagesToShow - 1);
            
            if (endPage - startPage + 1 < maxPagesToShow) {
                startPage = Math.max(1, endPage - maxPagesToShow + 1);
            }
            
            for (let i = startPage; i <= endPage; i++) {
                const pageBtn = document.createElement('div');
                pageBtn.className = `page-number ${i === appState.currentPage ? 'active' : ''}`;
                pageBtn.textContent = i;
                pageBtn.onclick = () => goToPage(i);
                pageNumbers.appendChild(pageBtn);
            }
        }

        function goToPage(page) {
            appState.currentPage = page;
            updateTable();
            updatePagination();
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // ===== SETUP EVENT LISTENERS =====
        function setupEventListeners() {
            // Filter event listeners
            document.getElementById('statusFilter').addEventListener('change', function() {
                appState.currentFilters.status = this.value;
                appState.currentPage = 1;
                applyFilters();
                updateTable();
            });
            
            document.getElementById('betTypeFilter').addEventListener('change', function() {
                appState.currentFilters.betType = this.value;
                appState.currentPage = 1;
                applyFilters();
                updateTable();
            });
            
            document.getElementById('sportFilter').addEventListener('change', function() {
                appState.currentFilters.sport = this.value;
                appState.currentPage = 1;
                applyFilters();
                updateTable();
            });
            
            document.getElementById('searchInput').addEventListener('input', function() {
                appState.currentFilters.search = this.value;
                appState.currentPage = 1;
                applyFilters();
                updateTable();
            });
            
            // Pagination event listeners
            document.getElementById('prevPage').addEventListener('click', function() {
                if (appState.currentPage > 1) {
                    goToPage(appState.currentPage - 1);
                }
            });
            
            document.getElementById('nextPage').addEventListener('click', function() {
                if (appState.currentPage < appState.totalPages) {
                    goToPage(appState.currentPage + 1);
                }
            });
            
            // Keyboard shortcuts
            document.addEventListener('keydown', function(e) {
                // Ctrl+F to focus search
                if ((e.ctrlKey || e.metaKey) && e.key === 'f') {
                    e.preventDefault();
                    document.getElementById('searchInput').focus();
                }
                
                // Escape to clear filters or close modal
                if (e.key === 'Escape') {
                    if (document.getElementById('detailModal').classList.contains('active')) {
                        hideDetailModal();
                    } else if (document.getElementById('storageModal').classList.contains('active')) {
                        hideStorageModal();
                    } else {
                        clearAllFilters();
                    }
                }
            });
            
            // Close modal on outside click
            document.getElementById('detailModal').addEventListener('click', function(e) {
                if (e.target === this) {
                    hideDetailModal();
                }
            });
        }

        function clearAllFilters() {
            document.getElementById('statusFilter').value = 'all';
            document.getElementById('betTypeFilter').value = 'all';
            document.getElementById('sportFilter').value = 'all';
            document.getElementById('searchInput').value = '';
            
            appState.currentFilters = {
                status: 'all',
                betType: 'all',
                sport: 'all',
                search: ''
            };
            
            appState.currentPage = 1;
            applyFilters();
            updateTable();
        }

        // ===== UTILITY FUNCTIONS =====
        function showLoading(show) {
            const loading = document.getElementById('loadingBets');
            loading.style.display = show ? 'block' : 'none';
        }

        function showMessage(message, type = 'info') {
            // Create toast message
            const toast = document.createElement('div');
            toast.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: ${type === 'error' ? '#ef4444' : type === 'success' ? '#10b981' : '#3b82f6'};
                color: white;
                padding: 12px 20px;
                border-radius: 8px;
                font-weight: 500;
                z-index: 3000;
                animation: slideIn 0.3s ease;
            `;
            
            toast.innerHTML = `
                <i class="fas fa-${type === 'error' ? 'exclamation-triangle' : type === 'success' ? 'check-circle' : 'info-circle'}"></i>
                ${message}
            `;
            
            document.body.appendChild(toast);
            
            setTimeout(() => {
                toast.style.animation = 'slideOut 0.3s ease';
                setTimeout(() => toast.remove(), 300);
            }, 3000);
        }

        // ===== BET ACTIONS =====
        function saveSingleBet(betId) {
            const bet = appState.allBets.find(b => b.id === betId);
            if (!bet) return;
            
            const storageData = {
                title: `Saved Bet: ${bet.type === 'accumulator' ? 'Accumulator' : bet.match || 'Unknown Match'}`,
                items: [{
                    description: bet.type === 'accumulator' ? 
                        `Accumulator (${bet.selections?.length || 0} selections) @ ${bet.totalOdds || 0}x` :
                        `${bet.match} - ${bet.betType} @ ${bet.odds}x`,
                    amount: bet.amount || 0,
                    status: bet.status || 'pending',
                    betId: bet.id,
                    savedAt: new Date().toISOString()
                }],
                notes: `Saved from All Bets listing`,
                category: bet.type === 'accumulator' ? 'accumulator_bet' : 'single_bet',
                createdAt: new Date().toISOString()
            };
            
            if (saveToBetStorage(storageData)) {
                showMessage('Bet saved to storage successfully!', 'success');
            } else {
                showMessage('Failed to save bet to storage', 'error');
            }
        }

        // ===== STORAGE INTEGRATION =====
        function showStorageModal() {
            document.getElementById('storageModal').classList.add('active');
            
            const filteredCount = appState.filteredBets.length;
            const defaultTitle = `Saved Bets (${filteredCount} items) - ${new Date().toLocaleDateString()}`;
            document.getElementById('storageTitle').value = defaultTitle;
        }
        
        function hideStorageModal() {
            document.getElementById('storageModal').classList.remove('active');
        }
        
        function saveCurrentListToStorage() {
            const title = document.getElementById('storageTitle').value.trim();
            if (!title) {
                showMessage('Please enter a title for your saved list', 'error');
                return;
            }
            
            try {
                // Extract bets from current filtered view
                const bets = [];
                const currentPageBets = appState.filteredBets.slice(0, 20);
                
                currentPageBets.forEach(bet => {
                    bets.push({
                        description: bet.type === 'accumulator' ? 
                            `Accumulator: ${bet.selections?.length || 0} selections @ ${bet.totalOdds || 0}x` :
                            `${bet.match} - ${bet.league} (${bet.betType})`,
                        amount: bet.amount || 0,
                        odds: bet.type === 'accumulator' ? bet.totalOdds : bet.odds,
                        status: bet.status || 'pending',
                        betId: bet.id,
                        type: bet.type || 'single'
                    });
                });
                
                if (bets.length === 0) {
                    showMessage('No bets found to save', 'error');
                    return;
                }
                
                // Prepare data for storage
                const storageData = {
                    title: title,
                    items: bets,
                    notes: `Saved from All Bets listing (${appState.filteredBets.length} total bets)`,
                    category: 'all_bets_listing',
                    createdAt: new Date().toISOString(),
                    filters: {...appState.currentFilters}
                };
                
                // Save to storage
                if (saveToBetStorage(storageData)) {
                    hideStorageModal();
                    showMessage(`Successfully saved ${bets.length} bet(s) to storage!`, 'success');
                } else {
                    showMessage('Failed to save to storage', 'error');
                }
                
            } catch (error) {
                console.error('Error saving to storage:', error);
                showMessage('Error saving to storage. Please try manually.', 'error');
            }
        }
        
        function saveToBetStorage(listData) {
            try {
                const currentUser = auth.currentUser ? 
                    auth.currentUser.uid : 
                    'anonymous';
                
                const storageKey = `millioner_bets_${currentUser}`;
                const existingData = localStorage.getItem(storageKey);
                let lists = [];
                
                if (existingData) {
                    try {
                        lists = JSON.parse(existingData);
                    } catch (e) {
                        console.warn('Could not parse existing storage data');
                    }
                }
                
                // Add new list
                lists.unshift({
                    id: Date.now().toString(),
                    ...listData,
                    status: 'active',
                    totalAmount: listData.items.reduce((sum, item) => sum + (item.amount || 0), 0),
                    itemCount: listData.items.length
                });
                
                // Keep only last 50 lists to prevent storage issues
                if (lists.length > 50) {
                    lists = lists.slice(0, 50);
                }
                
                // Save back to localStorage
                localStorage.setItem(storageKey, JSON.stringify(lists));
                return true;
                
            } catch (e) {
                console.error('Storage error:', e);
                showMessage('Storage limit exceeded! Please clean up old lists.', 'error');
                return false;
            }
        }
        
        function openStorageManager() {
            // You would need to create a bet-storage.html file
            showMessage('Storage manager feature coming soon!', 'info');
        }

        // ===== AUTO REFRESH =====
        setInterval(() => {
            loadRecords();
        }, 30000); // Refresh every 30 seconds

        // ===== CLEANUP =====
        window.addEventListener('beforeunload', () => {
            // Save current view state
            localStorage.setItem('bets_listing_state', JSON.stringify({
                filters: appState.currentFilters,
                page: appState.currentPage
            }));
        });

        // Load saved state
        const savedState = localStorage.getItem('bets_listing_state');
        if (savedState) {
            try {
                const state = JSON.parse(savedState);
                if (state.filters) {
                    appState.currentFilters = state.filters;
                    appState.currentPage = state.page || 1;
                    
                    // Apply saved filters
                    document.getElementById('statusFilter').value = state.filters.status;
                    document.getElementById('betTypeFilter').value = state.filters.betType || 'all';
                    document.getElementById('sportFilter').value = state.filters.sport;
                    document.getElementById('searchInput').value = state.filters.search;
                }
            } catch (e) {
                console.log('Could not load saved state');
            }
        }
    </script>
</body>
</html>
